<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script src="js/create_other.js"></script>
	<title>新建其他入账</title>
</head>
<body>
	<div class="row">
		<div id="breadcrumb" class="col-md-12">
			<ol class="breadcrumb">
				<li><a href="index.html">首页</a></li>
				<li><a href="#">新建入账记录</a></li>
				<li><a href="#">其他入账</a></li>
			</ol>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12 col-sm-12">
			<div class="box">
				<div class="box-header">
					<div class="box-name">
						<i class="fa fa-edit"></i> <span>新建其他入账</span>
					</div>
					<div class="box-icons">
						<a class="collapse-link"> <i class="fa fa-chevron-up"></i>
						</a> <a class="expand-link"> <i class="fa fa-expand"></i>
						</a> <a class="close-link"> <i class="fa fa-times"></i>
						</a>
					</div>
					<div class="no-move"></div>
				</div>
				<div class="box-content">
					<form id="defaultForm" method="post" action="validators.html"
						class="form-horizontal">
						<fieldset>
							<legend>入账信息</legend>
							<div class="form-group has-error has-feedback">
								<label class="col-sm-2 control-label">设计所</label>
								<div class="col-sm-4">
									<select class="form-control" id="department">
										<option>一所</option>
										<option>二所</option>
										<option>三所</option>
										<option>四所</option>
										<option>五所</option>
									</select>
								</div>
								<label class="col-sm-2 control-label">到账时间</label>
								<div class="col-sm-4">
									<input type="text" id="account_date" class="form-control"
										placeholder="Date"> <span
										class="fa fa-calendar txt-danger form-control-feedback"></span>
								</div>
							</div>
							<div class="form-group has-error has-feedback">
								<label class="col-sm-2 control-label">入账类型</label>
								<div class="col-sm-4">
									<select class="form-control" id="type">
										<option value="11">提取项目奖金</option>
										<option value="12">提取所长奖金</option>
										<option value="13">报账</option>
										<option value="15">其他</option>
									</select>
								</div>
								<label class="col-sm-2 control-label">项目名称</label>
								<div class="col-sm-4">
									<input id="account_item" type="text" class="form-control"
										data-toggle="tooltip" data-placement="bottom" title="项目名称">
								</div>
							</div>
							<div class="form-group has-error has-feedback" id="div_pro">
								<label class="col-sm-2 control-label">项目奖金</label>
								<div class="col-sm-4">
									<input id="pro_bonus_amount_bak" type="text" class="form-control">
								</div>
							</div>
							<div class="form-group has-error has-feedback" id="div_exp">
								<label class="col-sm-2 control-label">报账成本</label>
								<div class="col-sm-4">
									<input id="expense_amount_bak" type="text" class="form-control">
								</div>
							</div>
							<div  id="div_dir">
							<div class="form-group has-error has-feedback" id="div_dir_amount">
								<label class="col-sm-2 control-label">所长奖金</label>
								<div class="col-sm-4">
									<input id="dir_amount_bak" type="text" class="form-control">
								</div>
								
							</div>
							<div class="form-group has-error has-feedback" id="dir1">
								<label class="col-sm-2 control-label" id="dir1_name2">所长1奖金</label>
								<input type="hidden" id="dir_count"  />
								<input type="hidden" id="dir1_id"  />
								<input type="hidden" id="dir1_name"  />
								<div class="col-sm-4">
									<input id="dir1_amount" type="text" class="form-control"> 
								</div>
							</div>
							<div class="form-group has-error has-feedback" id="dir2">
								<label class="col-sm-2 control-label" id="dir2_name2">所长2奖金</label>
								<input type="hidden" id="dir2_id"  />
								<input type="hidden" id="dir2_name"  />
								<div class="col-sm-4">
									<input id="dir2_amount" type="text" class="form-control"> 
								</div>
							</div>
							<div class="form-group has-error has-feedback" id="dir3">
								<label class="col-sm-2 control-label" id="dir3_name2">所长3奖金</label>
								<input type="hidden" id="dir3_id"  />
								<input type="hidden" id="dir3_name"  />
								<div class="col-sm-4">
									<input id="dir3_amount" type="text" class="form-control"> 
								</div>
							</div>
							</div>
							<div class="form-group has-error has-feedback">
								<label class="col-sm-2 control-label">备注</label>
								<div class="col-sm-10">
								<textarea class="form-control" rows="3" id="remark"></textarea>
								</div>
							</div>
						</fieldset>
						<fieldset>
							<legend>所权益明细</legend>
							<div class="form-group has-error has-feedback">
								<label class="col-sm-2 control-label">所权益变动</label>
								<div class="col-sm-4">
									<input id="equity" type="text" class="form-control" data-toggle="tooltip" data-placement="top" title="自动计算" disabled>
								</div>
							</div>
							<div class="form-group has-error has-feedback">
								<label class="col-sm-2 control-label">项目奖金</label>
								<div class="col-sm-4">
									<input id="pro_bonus_amount" type="text" class="form-control" data-toggle="tooltip" data-placement="top" title="自动计算" disabled>
								</div>
								<label class="col-sm-2 control-label">项目奖金比例</label>
								<div class="col-sm-4">
									<input id="pro_bonus_rate" type="text" class="form-control" data-toggle="tooltip" data-placement="top" title="自动计算" disabled>
								</div>
							</div>
							<div class="form-group has-error has-feedback">
								<label class="col-sm-2 control-label">报账成本</label>
								<div class="col-sm-4">
									<input id="expense_amount" type="text" class="form-control"
										data-toggle="tooltip" data-placement="top" title="自动计算"
										disabled>
								</div>
								<label class="col-sm-2 control-label">报账成本比例</label>
								<div class="col-sm-4">
									<input id="expense_rate" type="text" class="form-control"
										data-toggle="tooltip" data-placement="top" title="自动计算"
										disabled>
								</div>
							</div>
							<div class="form-group has-error has-feedback">
								<label class="col-sm-2 control-label">所长奖金</label>
								<div class="col-sm-4">
									<input id="dir_amount" type="text" class="form-control"
										data-toggle="tooltip" data-placement="top" title="自动计算"
										disabled>
								</div>
								<label class="col-sm-2 control-label">所长奖金比例</label>
								<div class="col-sm-4">
									<input id="dir_rate" type="text" class="form-control"
										data-toggle="tooltip" data-placement="top" title="自动计算"
										disabled>
								</div>
							</div>
						</fieldset>

						<div class="clearfix"></div>
						<div class="clearfix"></div>
						<div class="form-group">
							<div class="col-sm-12 col-sm-offset-6">
								<button id="btn_submit" type="submit" class="btn btn-warning btn-label-left">
									<span><i class="fa fa-clock-o"></i></span> 提交
								</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">
	function setDefault(){
		$("#pro_bonus_amount_bak").val(0);
		$("#expense_amount_bak").val(0);
		$("#dir_amount_bak").val(0);
		$("#div_pro").show();
		$("#div_dir").hide();
		$("#div_exp").hide();
		$("#expense_amount").val("0");
		$("#dir_amount").val("0");
		$("#pro_bonus_amount").val("0");
		$("#dir1_amount").val("0");
		$("#dir2_amount").val("0");
		$("#dir3_amount").val("0");
	}
	
	jQuery(function($) {
		$.datepicker.regional['zh-CN'] = {
			closeText : '关闭',
			prevText : '&#x3c;上月',
			nextText : '下月&#x3e;',
			currentText : '今天',
			monthNames : [ '一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月',
					'九月', '十月', '十一月', '十二月' ],
			monthNamesShort : [ '一', '二', '三', '四', '五', '六', '七', '八',
					'九', '十', '十一', '十二' ],
			dayNames : [ '星期天', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六' ],
			dayNamesShort : [ '周日', '周一', '周二', '周三', '周四', '周五', '周六' ],
			dayNamesMin : [ '日', '一', '二', '三', '四', '五', '六' ],
			weekHeader : '周',
			dateFormat : 'yy/mm/dd',
			firstDay : 1,
			isRTL : false,
			showMonthAfterYear : true,
			yearSuffix : '年'
		};
		$.datepicker.setDefaults($.datepicker.regional['zh-CN']);
	});
$(document).ready(function() {
	// Create Wysiwig editor for textare
	//TinyMCEStart('#wysiwig_simple', null);
	//TinyMCEStart('#wysiwig_full', 'extreme');
	// Add slider for change test input length
	FormLayoutExampleInputLength($( ".slider-style" ));
	// Initialize datepicker
	$('#account_date').datepicker({setDate: new Date()});
	// Load Timepicker plugin
	//LoadTimePickerScript(DemoTimePicker);
	// Add tooltip to form-controls
	$('.form-control').tooltip();
	//LoadSelect2Script(DemoSelect2);
	// Load example of form validation
	//LoadBootstrapValidatorScript(DemoFormValidator);
	// Add drag-n-drop feature to boxes
	setDefault();
	$("#expense_amount_bak").change(function(){
		var expense_amount = parseFloat($("#expense_amount_bak").val());
		var dir_amount = parseFloat($("#dir_amount_bak").val());
		var pro_bonus_amount = parseFloat($("#pro_bonus_amount_bak").val());
		var equity = expense_amount + dir_amount + pro_bonus_amount;
		$("#equity").val(equity);
		$("#expense_amount").val(expense_amount);
		$("#dir_amount").val(dir_amount);
		$("#pro_bonus_amount").val(pro_bonus_amount);

	});
	$("#dir_amount_bak").change(function(){
		var expense_amount = parseFloat($("#expense_amount_bak").val());
		var dir_amount = parseFloat($("#dir_amount_bak").val());
		var pro_bonus_amount = parseFloat($("#pro_bonus_amount_bak").val());
		var equity = expense_amount + dir_amount + pro_bonus_amount;
		$("#equity").val(equity);
		$("#expense_amount").val(expense_amount);
		$("#dir_amount").val(dir_amount);
		$("#pro_bonus_amount").val(pro_bonus_amount);
	});
	$("#pro_bonus_amount_bak").change(function(){
		var expense_amount = parseFloat($("#expense_amount_bak").val());
		var dir_amount = parseFloat($("#dir_amount_bak").val());
		var pro_bonus_amount = parseFloat($("#pro_bonus_amount_bak").val());
		var equity = expense_amount + dir_amount + pro_bonus_amount;
		$("#equity").val(equity);
		$("#expense_amount").val(expense_amount);
		$("#dir_amount").val(dir_amount);
		$("#pro_bonus_amount").val(pro_bonus_amount);
	});
	$("#dir1_amount").change(function(){
		var dir1_amount = parseFloat($("#dir1_amount").val());
		var dir2_amount = parseFloat($("#dir2_amount").val());
		var dir3_amount = parseFloat($("#dir3_amount").val());
		var dir_amount = dir1_amount + dir2_amount + dir3_amount;
		var equity = dir_amount;
		$("#equity").val(equity);
		$("#expense_amount").val("0");
		$("#dir_amount").val(dir_amount);
		$("#pro_bonus_amount").val("0");
	});
	$("#dir2_amount").change(function(){
		var dir1_amount = parseFloat($("#dir1_amount").val());
		var dir2_amount = parseFloat($("#dir2_amount").val());
		var dir3_amount = parseFloat($("#dir3_amount").val());
		var dir_amount = dir1_amount + dir2_amount + dir3_amount;
		var equity = dir_amount;
		$("#equity").val(equity);
		$("#expense_amount").val("0");
		$("#dir_amount").val(dir_amount);
		$("#pro_bonus_amount").val("0");
	});
	$("#dir3_amount").change(function(){
		var dir1_amount = parseFloat($("#dir1_amount").val());
		var dir2_amount = parseFloat($("#dir2_amount").val());
		var dir3_amount = parseFloat($("#dir3_amount").val());
		var dir_amount = dir1_amount + dir2_amount + dir3_amount;
		var equity = dir_amount;
		$("#equity").val(equity);
		$("#expense_amount").val("0");
		$("#dir_amount").val(dir_amount);
		$("#pro_bonus_amount").val("0");
	});
	$('#btn_submit').on('click', function(e) {
		e.preventDefault();
		other_save();
	});
	$("#type").change(function(){
		var department = $("#department").val();
		var type = $("#type option:selected").val();
		if(type == "11"){
			$("#expense_amount_bak").val("0");
			$("#dir_amount_bak").val("0");
			$("#expense_amount").val("0");
			$("#dir_amount").val("0");
			$("#dir1_amount").val("0");
			$("#dir2_amount").val("0");
			$("#dir3_amount").val("0");
			$("#equity").val("0");
		}
		if(type == "12"){
			$("#pro_bonus_amount_bak").val("0");
			$("#expense_amount_bak").val("0");
			$("#pro_bonus_amount").val("0");
			$("#expense_amount").val("0");
			$("#dir1").val("0");
			$("#dir2").val("0");
			$("#dir3").val("0");
			$("#equity").val("0");
		}
		if(type == "13"){
			$("#pro_bonus_amount_bak").val("0");
			$("#dir_amount_bak").val("0");
			$("#pro_bonus_amount").val("0");
			$("#dir_amount").val("0");
			$("#dir1_amount").val("0");
			$("#dir2_amount").val("0");
			$("#dir3_amount").val("0");
			$("#equity").val("0");
		}
		if(type == "15"){
			$("#dir1_amount").val("0");
			$("#dir2_amount").val("0");
			$("#dir3_amount").val("0");
			$("#equity").val("0");
		}
		showControl();
	});
	
	$("#department").change(function(){
		initDir();
	});
	
	initDir();
	showControl();
	WinMove();
});
</script>
</body>
</html>